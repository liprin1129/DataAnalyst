---
title: "Problemset 1"
output: html_document
---

1. Quiz: Diamond
```{r}
library(ggplot2) #must load the ggplot package first
library(ggplot2)
```

```{r}
data(diamonds) #loads the diamonds data set since it comes with the ggplot package
```

```{r}
summary(diamonds)
```

How many ordered factors are in the data set?
```{r}
is.ordered(diamonds$carat)
is.ordered(diamonds$cut)
is.ordered(diamonds$color)
is.ordered(diamonds$clarity)
is.ordered(diamonds$depth)
is.ordered(diamonds$table)
is.ordered(diamonds$price)
is.ordered(diamonds$x)
is.ordered(diamonds$y)
is.ordered(diamonds$z)
```

What letter represents the best color for a diamond?
```{r}
diamonds$color
```

2. Quiz: Price Histogram
```{r}
ggplot(aes(x = price), data = diamonds) +
  geom_histogram()
```

3. Quize: Price Histogram Summary
```{r}
summary(diamonds$price)
```

4. Quize: Diamond Counts
```{r}
sum(diamonds$price < 500)
sum(diamonds$price < 250)
sum(diamonds$price >= 15000)
```

5. Quiz: Cheaper Diamonds
```{r}
ggplot(aes(x = price), data = diamonds) +
  geom_histogram(binwidth = 25) +
  scale_x_continuous(limits = c(0, 10000), breaks = seq(0, 10000, 1000))
ggsave('priceHistogram.png')

ggplot(aes(x = price), data = diamonds) +
  geom_histogram(binwidth = 20) +
  scale_x_continuous(limits = c(200, 1500), breaks = seq(0, 1500, 60))
ggsave('priceHistogram.png')
```

6. Quize: Price by Cut Histograms

# Break out the histogram of diamond prices by cut.

# You should have five histograms in separate
# panels on your resulting plot.

```{r}
ggplot(aes(x = price), data = diamonds) +
  geom_histogram(binwidth = 25) +
  #scale_x_continuous(limits = c(0, 3000), breaks = seq(0, 3000, 200)) +
  facet_wrap(~cut, ncol = 2)
```

7. Quiz: Price by Cut
```{r}
# 1. Which cut has the highest priced diamond?
by(diamonds$price, diamonds$cut, max)

# 2. Which cut has the lowest priced diamond?
by(diamonds$price, diamonds$cut, min)

# 3. Which cut has the lowes median price?
by(diamonds$price, diamonds$cut, median)

# or to answer all questions
by(diamonds$price, diamonds$cut, summary)
```

8. Quiz: Scales and Multiple Histograms

# In the two last exercises, we looked at
# the distribution for diamonds by cut.

# Run the code below in R Studio to generate
# the histogram as a reminder.

```{r}
qplot(x = price, data = diamonds) + facet_wrap(~cut)
```


```{r}
# In the last exercise, we looked at the summary statistics
# for diamond price by cut. If we look at the output table, the
# the median and quartiles are reasonably close to each other.

# diamonds$cut: Fair
#    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#     337    2050    3282    4359    5206   18570 
# ------------------------------------------------------------------------ 
# diamonds$cut: Good
#    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#     327    1145    3050    3929    5028   18790 
# ------------------------------------------------------------------------ 
# diamonds$cut: Very Good
#    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#     336     912    2648    3982    5373   18820 
# ------------------------------------------------------------------------ 
# diamonds$cut: Premium
#    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#     326    1046    3185    4584    6296   18820 
# ------------------------------------------------------------------------ 
# diamonds$cut: Ideal
#    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#     326     878    1810    3458    4678   18810 

# This means the distributions should be somewhat similar,
# but the histograms we created don't show that.

# The 'Fair' and 'Good' diamonds appear to have 
# different distributions compared to the better
# cut diamonds. They seem somewhat uniform
# on the left with long tails on the right.

# Let's look in to this more.

# Look up the documentation for facet_wrap in R Studio.
# Then, scroll back up and add a parameter to facet_wrap so that
# the y-axis in the histograms is not fixed. You want the y-axis to
# be different for each histogram.
# http://www.cookbook-r.com/Graphs/Facets_(ggplot2)/

library(reshape2)

qplot(x = price, data = diamonds) + facet_wrap(~cut, scales = 'free_y')
```

9. Quiz: Price per Carat by Cut

# Create a histogram of price per carat
# and facet it by cut. You can make adjustments
# to the code from the previous exercise to get
# started.

# Adjust the bin width and transform the scale
# of the x-axis using log10.

```{r}
ggplot(aes(x = price/carat), data = diamonds) +
  geom_histogram(binwidth = 0.1) +
  facet_wrap(~cut, ncol = 3, scales = 'free_y') +
  scale_x_log10()
```

10. Quiz: Price Box Plots

# Investigate the price of diamonds using box plots,
# numerical summaries, and one of the following categorical
# variables: cut, clarity, or color.

# There wonâ€™t be a solution video for this
# exercise so go to the discussion thread for either
# BOXPLOTS BY CLARITY, BOXPLOT BY COLOR, or BOXPLOTS BY CUT
# to share you thoughts and to
# see what other people found.

# You can save images by using the ggsave() command.
# ggsave() will save the last plot created.
# For example...
#                  qplot(x = price, data = diamonds)
#                  ggsave('priceHistogram.png')

# ggsave currently recognises the extensions eps/ps, tex (pictex),
# pdf, jpeg, tiff, png, bmp, svg and wmf (windows only).

```{r}
ggplot(aes(x = cut, y = price), data = diamonds) +
  geom_boxplot() +
  coord_cartesian(ylim = c(0, 6500))
```
```{r}
ggplot(aes(x = clarity, y = price), data = diamonds) +
  geom_boxplot() +
  coord_cartesian(ylim = c(0, 6000))
```
```{r}
ggplot(aes(x = color, y = price), data = diamonds) +
  geom_boxplot() +
  coord_cartesian(ylim = c(0, 8000))
```

11. Quiz: Interquantile Range - IQR

What is the price range for the middle 50% of diamonds with color D?
```{r}
summary(subset(diamonds, color == 'D')$price)
```

What is the price range for the middle 50% of diamonds with color J?
```{r}
summary(subset(diamonds, color == 'J')$price)
```

What is the IQR for diamonds with the best color?
```{r}
IQR(subset(diamonds, color == 'D')$price)
```
```{r}
IQR(subset(diamonds, color == 'E')$price)
```
```{r}
IQR(subset(diamonds, color == 'F')$price)
```
```{r}
IQR(subset(diamonds, color == 'G')$price)
```
```{r}
IQR(subset(diamonds, color == 'H')$price)
```
```{r}
IQR(subset(diamonds, color == 'I')$price)
```
```{r}
IQR(subset(diamonds, color == 'J')$price)
```

or just run
```{r}
by(diamonds$price, diamonds$color, IQR)
```

12. Quiz: Price per Carat Box Plots by Color
# the different colors of diamonds using boxplots.

# Go to the discussions to
# share your thoughts and to discover
# what other people found.

# You can save images by using the ggsave() command.
# ggsave() will save the last plot created.
# For example...
#                  qplot(x = price, data = diamonds)
#                  ggsave('priceHistogram.png')

# ggsave currently recognises the extensions eps/ps, tex (pictex),
# pdf, jpeg, tiff, png, bmp, svg and wmf (windows only).
```{r}
ggplot(aes(x = color, y = price/carat), data = diamonds) +
  geom_boxplot() +
  coord_cartesian(ylim = c(2000, 5500))
```

13. Quiz: Carat Frequency Polygon

Investigate the wiehgt of the diamonds (carat) using a frequency polygon. Use different bin widths to se how the frequency polygon changes. What carat size has a count greater than 2000?

```{r}
ggplot(aes(x = carat), data = diamonds) +
  geom_freqpoly(binwidth=0.1) +
  scale_x_continuous(breaks = seq(0, 5, 0.2)) +
  scale_y_continuous(breaks = seq(0, 15000, 1000))

table(diamonds$carat)

ggplot(aes(x = carat), data = diamonds) + 
  geom_freqpoly(binwidth=0.1) +
  scale_x_continuous(breaks= c(seq(0,5,1)[-2],0.1,0.3,0.8,1.01,1.6,2.0,3.0,5.0)) +
  scale_y_continuous(breaks= c(seq(0,12000,2500),2000)) +
  geom_hline(yintercept=2000, color = "red", linetype = "dashed")+
  geom_vline(xintercept= c(0.1,0.3,0.8,1.01,1.6,2.0,3.0,5.0), color = "blue", linetype = "dashed") +
  theme(text = element_text(face= "bold",size = 10),axis.text.x = element_text(angle = 90, hjust = 1))
```

14. Quiz: Data Wrangling in R

Data munging or data wrangling can take up much of a data scientist's or data analyst's time. There are two R packages that make these tasks easier in R: tidyr and dplyr.

tidyr -a package that reshapes the layout of your data

dplyr - a package that helps you transform tidy, tabular data

Review Data Wrangling in R to get a sense of how these packages allow you to manipulate data. You can use these packages to help you in the next programming task and in your future investigations.

There are some useful cheat sheets on RStudio's webpage (http://www.rstudio.com/resources/cheatsheets/). The Data Import (https://github.com/rstudio/cheatsheets/raw/master/source/pdfs/data-import-cheatsheet.pdf) and Data Transformation (https://github.com/rstudio/cheatsheets/raw/master/source/pdfs/data-transformation-cheatsheet.pdf) sheets will be good references for working with tidyr and dplyr, respectively. 

```{r}
#install.packages('tidyr')
#install.packages('dplyr')

library('tidyr')
library('dplyr')
```
